{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { FlatList } from 'react-native-gesture-handler';\nimport Icon from \"@expo/vector-icons/FontAwesome5\";\nimport { UIHeader } from \"../../components\";\nimport { fontSizes } from \"../../constants\";\nimport { get, child, firebaseDatabase, firebaseDatabaseRef } from \"../../firebase/firebase\";\nimport ChatItem from \"./ChatItem\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Chat = function Chat(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([{\n    url: 'https://randomuser.me/api/portraits/men/10.jpg',\n    name: 'Đỗ Quốc Thưởng',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 3\n  }, {\n    url: 'https://randomuser.me/api/portraits/men/11.jpg',\n    name: 'Đỗ minh Khôi',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 10\n  }, {\n    url: 'https://randomuser.me/api/portraits/women/12.jpg',\n    name: 'Nguyễn Thị Hải yến',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 8\n  }, {\n    url: 'https://randomuser.me/api/portraits/men/13.jpg',\n    name: 'Đặng Trung Hiếu',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 33\n  }, {\n    url: 'https://randomuser.me/api/portraits/women/14.jpg',\n    name: 'Đỗ Tuệ Nhi',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 24\n  }, {\n    url: 'https://randomuser.me/api/portraits/men/15.jpg',\n    name: 'Tống Đăng Quý',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 16\n  }, {\n    url: 'https://randomuser.me/api/portraits/women/16.jpg',\n    name: 'Đỗ Gia Ngọc',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 2\n  }, {\n    url: 'https://randomuser.me/api/portraits/women/17.jpg',\n    name: 'Nguyễn Thị Hằng',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 0\n  }, {\n    url: 'https://randomuser.me/api/portraits/women/18.jpg',\n    name: 'Ngô Thanh Vân',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 0\n  }, {\n    url: 'https://randomuser.me/api/portraits/men/19.jpg',\n    name: 'Phạm Đình Hải',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 0\n  }, {\n    url: 'https://randomuser.me/api/portraits/men/20.jpg',\n    name: 'Đỗ Trường Phong',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 0\n  }, {\n    url: 'https://randomuser.me/api/portraits/men/21.jpg',\n    name: 'Đào Minh Tuấn',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 0\n  }, {\n    url: 'https://randomuser.me/api/portraits/women/22.jpg',\n    name: 'Nguyễn Thị Trà',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 0\n  }, {\n    url: 'https://randomuser.me/api/portraits/women/23.jpg',\n    name: 'Nguyễn Thị Thanh Vân',\n    message: 'Hello, how are you ?',\n    numberOfUnreadMessages: 0\n  }]),\n      _useState2 = _slicedToArray(_useState, 2),\n      users = _useState2[0],\n      setUsers = _useState2[1];\n\n  useEffect(function () {\n    var dbRef = firebaseDatabaseRef(firebaseDatabase);\n    get(child(dbRef, 'users')).then(function (snapshot) {\n      if (snapshot.exists()) {\n        var value = snapshot.val();\n        Object.values(value).map(function (eachObject) {\n          return {\n            url: '',\n            name: eachObject.email\n          };\n        });\n        debugger;\n      } else {\n        console.log('No data avaiable');\n      }\n    }).catch(function (error) {\n      console.log(\"Cannot get users from Firebase: \" + error);\n    });\n  });\n  return _jsxs(View, {\n    style: {\n      flexDirection: 'column'\n    },\n    children: [_jsx(UIHeader, {\n      title: 'Notification',\n      lefIconName: 'arrow-left',\n      rightIconName: 'search',\n      onPressLeftIcon: function onPressLeftIcon() {\n        return alert('left icon');\n      },\n      onPressRightIcon: function onPressRightIcon() {\n        return alert('right icon');\n      }\n    }), _jsxs(View, {\n      style: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingStart: 10\n      },\n      children: [_jsx(Text, {\n        style: {\n          color: 'black',\n          fontSize: fontSizes.h6\n        },\n        children: \"6 unread messages\"\n      }), _jsx(Icon, {\n        name: 'search',\n        size: 23,\n        color: 'white',\n        style: {\n          padding: 10\n        },\n        onPress: function onPress() {\n          return alert('You Press delete');\n        }\n      })]\n    }), _jsx(FlatList, {\n      style: {},\n      keyExtractor: function keyExtractor(item) {\n        return item.url;\n      },\n      data: users,\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item,\n            index = _ref2.index;\n        return _jsx(ChatItem, {\n          name: item.name,\n          url: item.url,\n          message: item.message,\n          numberOfUnreadMessages: item.numberOfUnreadMessages,\n          onPress: function onPress() {\n            return navigation.navigate('Messenger', {\n              user: item\n            });\n          }\n        }, index);\n      }\n    })]\n  });\n};\n\nexport default Chat;","map":{"version":3,"names":["React","useEffect","useState","FlatList","Icon","UIHeader","fontSizes","get","child","firebaseDatabase","firebaseDatabaseRef","ChatItem","Chat","navigation","url","name","message","numberOfUnreadMessages","users","setUsers","dbRef","then","snapshot","exists","value","val","Object","values","map","eachObject","email","console","log","catch","error","flexDirection","alert","justifyContent","alignItems","paddingStart","color","fontSize","h6","padding","item","index","navigate","user"],"sources":["D:/React/react-native-project/training-app/screens/Chat/Chat.tsx"],"sourcesContent":["import { NativeStackHeaderProps } from '@react-navigation/native-stack';\nimport React, { useEffect, useState } from 'react';\nimport {\n    Text,\n    View,\n    Image,\n    Dimensions\n} from \"react-native\";\nimport { FlatList } from 'react-native-gesture-handler';\nimport Icon from 'react-native-vector-icons/FontAwesome5';\nimport { SafeAreaView } from 'react-navigation';\nimport { UIHeader } from '../../components';\nimport { fontSizes } from '../../constants';\nimport { get, child, firebaseDatabase, firebaseDatabaseRef } from '../../firebase/firebase';\nimport ChatItem from './ChatItem';\n\n\nconst Chat = ({ navigation }: NativeStackHeaderProps) => {\n\n    const [users, setUsers] = useState([\n        {\n            url: 'https://randomuser.me/api/portraits/men/10.jpg',\n            name: 'Đỗ Quốc Thưởng',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 3\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/men/11.jpg',\n            name: 'Đỗ minh Khôi',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 10\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/women/12.jpg',\n            name: 'Nguyễn Thị Hải yến',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 8\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/men/13.jpg',\n            name: 'Đặng Trung Hiếu',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 33\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/women/14.jpg',\n            name: 'Đỗ Tuệ Nhi',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 24\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/men/15.jpg',\n            name: 'Tống Đăng Quý',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 16\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/women/16.jpg',\n            name: 'Đỗ Gia Ngọc',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 2\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/women/17.jpg',\n            name: 'Nguyễn Thị Hằng',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 0\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/women/18.jpg',\n            name: 'Ngô Thanh Vân',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 0\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/men/19.jpg',\n            name: 'Phạm Đình Hải',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 0\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/men/20.jpg',\n            name: 'Đỗ Trường Phong',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 0\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/men/21.jpg',\n            name: 'Đào Minh Tuấn',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 0\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/women/22.jpg',\n            name: 'Nguyễn Thị Trà',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 0\n        },\n        {\n            url: 'https://randomuser.me/api/portraits/women/23.jpg',\n            name: 'Nguyễn Thị Thanh Vân',\n            message: 'Hello, how are you ?',\n            numberOfUnreadMessages: 0\n        },\n    ]);\n\n    useEffect(() => {\n        const dbRef = firebaseDatabaseRef(firebaseDatabase);\n        get(child(dbRef, 'users')).then((snapshot) => {\n            if (snapshot.exists()) {\n                let value = snapshot.val();\n                Object.values(value).map(eachObject => {\n                    return {\n                        url: '',\n                        name: eachObject.email\n                    }\n                })\n                debugger\n            } else {\n                console.log('No data avaiable')\n            }\n        }).catch((error) => {\n            console.log(`Cannot get users from Firebase: ${error}`);\n        })\n    });\n    return (\n        <View\n            style={{\n                flexDirection: 'column'\n            }}\n        >\n            <UIHeader\n                title={'Notification'}\n                lefIconName={'arrow-left'}\n                rightIconName={'search'}\n                onPressLeftIcon={() => {\n                    return alert('left icon');\n                }}\n                onPressRightIcon={() => {\n                    return alert('right icon');\n                }}\n            />\n            <View\n                style={{\n                    flexDirection: 'row',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    paddingStart: 10\n                }}\n            >\n                <Text\n                    style={{\n                        color: 'black',\n                        fontSize: fontSizes.h6\n                    }}>\n                    6 unread messages\n                </Text>\n                <Icon name={'search'} size={23} color={'white'}\n                    style={{\n                        padding: 10\n                    }}\n                    onPress={() => alert('You Press delete')}\n                />\n            </View>\n            <FlatList\n                style={{\n                    // backgroundColor: 'red'\n                }}\n                keyExtractor={item => item.url}\n                data={users}\n                renderItem={({ item, index }) =>\n                    <ChatItem\n                        key={index}\n                        name={item.name}\n                        url={item.url}\n                        message={item.message}\n                        numberOfUnreadMessages={item.numberOfUnreadMessages}\n                        onPress={() => navigation.navigate('Messenger', { user: item })}\n                    />}\n            />\n        </View>\n    )\n}\n\nexport default Chat"],"mappings":"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"},"metadata":{},"sourceType":"module"}